# 第一章 操作系统概论（一）

### 1. 操作系统的概念

1. 计算机系统定义

   是按用户的要求接收和存储信息、自动进行数据
   处理并输出结果信息的系统。

2. 分类： 

   --> 广义：机械式系统和电子式系统

   ---> 电子式系统： 模拟式和数字式计算机系统

3. 组成：

   ---> 硬件（子）系统和软件（子）系统。

![](F:\自考\操作系统\img\2020-05-12_214032.jpg)

### 2. 操作系统

##### 计算机系统的资源：

---> 硬件资源

---> 软件资源

在计算机系统中，集中了资源管理功能和控制程序执行功能的一种软件，成为操作系统。

##### 定义解析

* 组织和管理计算机系统中的硬件资源和软件资源
  * 在操作系统中，设计了各种表格或数据结构，将所有软硬件资源都加以登记
  * 比如： PCB、系统设备表等

* ”有效“

  * 指操作系统在管理计算机资源时要考虑到`系统运行的效率`和`资源利用率`。要进可能提高`中央处理器`的利用率，让他尽可能少的空转，应该在保证访问效能的前提下尽可能有效的利用其他资源。

  * 比如：减少内存、硬盘控件的浪费等。

    

* "合理"
  
* 指操作系统要“公平”对待不同的用户程序，保证系统不发生“死锁”和“饥饿”的现象。
  
* “方便”

  * 指操作系统的人机界面要考虑到用户使用界面和程序接口两个方面的易用性、易学性和易维护性

  * 用户使用接口：命令、图形界面，如Window图形界面

  * 程序接口：程序员能够使用操作系统提供服务供程序员编程。如Widow提供的`API`接口，Linux的系统调用。

    

### 3. 操作系统的特征

1. 并发性：
   * 是指在计算机中同时存在着若干个运行着的程序，从宏观上看，这些程序在同时向前推进。

2. 共享性：
   * 操作系统需要与多个用户程序公用系统中的各种资源，比如CPU、内存、外部设备等。

3. 随机性/异步性/不可预知性
   * 操作系统不能对所有运行的程序的行为以及硬件设备的情况做出任何事先的假定
   * 及操作系统不能与之程序在什么时候运行，什么时候因什么原因暂停，什么时候能得到资源继续运行，什么时候运行结束等，这些都是不可预知的。

### 4. 研究操作系统的观点

#### 1. 软件的观点

* 操作系统是一种大型系统软件，它是多功能程序的集合。有外在特性和内在特性

* 外在特性：接口

* 内在特性：与硬件交互

  ![](F:\自考\操作系统\img\2020-05-12_222325.jpg)

#### 2. 资源管理的观点

* 操作系统负责登记谁在使用什么样的资源，系统中还有那些资源空闲，当前响应了谁对资源的请求，以及回收那些不在使用的资源等。

#### 3. 进程的观点

* 把操作系统看作由多个可以同时独立运行的程序和一个对于这些程序进行协调的核心

* 侧重于分析系统隔各部分的并行工作，研究处理各项管理任务的分隔以及这些管理任务相互之间的关系

* 比如： 竞争资源、进程通信等

  

#### 4. 虚机器的观点

* 在操作系统的支持下，用户不需要直接用硬件机器（裸机），而是通过操作系统提供的各种手段来控制和使用计算机
* 例如，把所有的设备和文件的操作抽象为统一的打开、关闭、读、写等，用户感觉不到底层的操作差异
* 把操作系统的全部功能，包括系统调用、命令、作业控制语言等，称为操作系统虚拟机

![](F:\自考\操作系统\img\2020-05-12_225248.jpg)

#### 5. 服务提供者观点

* 从用户角度，站在操作系统之外观察操作系统，认为该服务提供者为用户提供了比裸机功能更强，服务质量更高、更方便灵活的虚拟机

### 5.  操作系统的功能

##### 1. 进程管理

* 进程管理的实质：对中央处理器进行管理。或者称为处理机管理
* 多道程序技术： 多个程序同时放入内存，如果一个程序因等待某个条件而不能运行，进吧处理器专用权转交给另一个可运行程序。
* 进程的引入：为了描述多道程序的并发而移入
* 进程的简单定义：一个程序的运行过程
* 进程管理的内容：进程控制、进程同步、进程间通信、调度。

##### 2. 存储管理

（1）任务：管理计算机内存的资源

（2）功能：

1. `内存的分配与回收`：当多个程序共享有限的内存资源时，要考虑如何为多个程序分配有限的内存空间，以及程序运行完毕时还需要内存回收

2. `存储保护`：存储内存中 的多个程序和数据应该彼此隔离、互不侵扰

3. `内存扩充`：将辅助存储器作为内存的扩充空间

   

##### 3. 文件管理

1. 任务：
   * 有效的支持文件的存储、检索和修改等操作，解决文件的共享、保密和保护问题，以便用户方便、安全的访问文件。

2. 功能：
   * 文件存储空间的管理
   * 目录管理
   * 文件系统的安全性

##### 4. 设备管理

1. 设备管理的含义：
   * 指计算机系统中除了处理器和内存以外的所有输入、输出设备的管理。

2. 功能：
   * 负责外部设备的分配、启动和故障处理。

3. 采用的技术
   * 中断技术、通道技术、虚拟机设备技术、缓冲技术，尽可能发挥设备和主机的并行能力。

##### 5. 用户接口

* 从用户观点看，操作系统是用户与计算机之间的接口
* 任务：为用户提供一个使用系统的良好环境，使用户能够有效的组织自己的工作流程，并使整个系统高效的运行

### 6. 操作系统的体系结构

#### 1. windows操作系统体系结构

1. 内核
   * 功能：线程调度、陷入处理和异常调度、中断处理和调度、多处理器同步、供执行体使用的基本内核对象。

2. 硬件抽象层HAL
   * 系统可移植性的关键部分，为隐形在Windows操作系统上的硬件平台低级接口，隐藏了各种与硬件有关的细节，如I/O接口等专用的和依赖于计算机平台的函数。

3. 执行体
   * 属于内核，一系统函数的形势提供了系统的服务，可通过`Win32API`进行访问。
4. 系统进程和系统线程
   * 执行系统代码

![](F:\自考\操作系统\img\2020-05-13_211959.jpg)

#### 2. UNIX操作系统的体系结构

1. 内核层
   * 是操作系统管理和控制中心，常驻内存。有两种接口：内核与硬件的接口和内核与shell的接口。
   * 内核本身分为两部分：进程控制子系统和文件子系统

2. 系统层
   * 内核层与应用层之间，供程序员开发调用，包括进程管理、文件管理、终端管理

3. 应用层
   * 面向用户操作的界面

![](F:\自考\操作系统\img\2020-05-13_212717.jpg)

#### 3. Linux操作系统的体系结构

* 四个部分
  * 内核
  * shell
  * 文件系统
  * 应用程序

#### 4. Android操作系统的体系结构

* 四个结构
  * 从高到低： 应用程序层、应用框架层、系统运行库层、Linux内核层

### 7. 操作系统的发展

1. 手工阶段

2. 监控程序

3. 多道批处理

4. 分时与实时操作系统

5. UNIX通用操作系统

6. 个人计算机操作系统

7. Android操作系统

### 8. 操作系统的分类

#### 1. 根据用户界面和功能分类

三种基本类型：

* 批处理系统
* 分时系统
* 实时系统

#### 2. 随者体系结构的发展

新类型：

* 个人操作系统
* 网络操作系统
* 分布式操作系统
* 嵌入式操作系统

#### 一、 批处理操作方式

1. 基本工作方式
   * 用户将作业交给系统操作员，系统操作元在收到作业后，并不立即将作业输入计算机，而是收到一定数量的用户作业之后，组成一批作业，在把这些批作业输入到计算机中。这批作业可在系统中形成一个连续的、自动转接的作业流。
   * 系统操作员然后启动操作系统，系统自动、依次执行每个作业。
   * 最后由操作员将执行完毕的作业交给用户。

2. 特点和分类

   * 特点：成批处理，用户不能干预自己作业的运行
   * 目标：系统资源利用率高，作业吞吐率高
   * 分类：批处理单道系统和批处理多道系统
     * 批处理单道系统：一次只选择一个作业装入计算机系统的主存储器运行。
     * 批处理多道系统：允许多个作业同时装入主存储器，使中央处理器轮流地执行各个作业，各个作业可以同时使用各自所需要的外围设备。

   ```
   批处理多道系统优点：
    （1）多道作业并行工作减少了处理器的空闲时间，即提高了处理器的利用率。
    （2）作业调度可以按一定的组合选择装入主存储器的作业，只要搭配合理。
    （3）作业执行过程中，不再访问低速的设备，而是直接从高速的磁盘上存取信息，从而缩短了作业执行时间，使单位时间内的处理能力得到提高。
    （4）作业成批输入、自动选择和控制作业执行，减少了人工操作时间和作业交接时间，有利于提高系统的吞吐率。
   ```

   

3. 设计思想
   * 在监控程序启动之前，操作员有选择的若干个作业合并成一批作业，将这批一页安装在输入设备上。然后启动监控程序，监控程序将自动控制这批作业的执行
   * 作业的运行与衔接都由监控程序自动控制，从而有效的提高了作业运行的效率。

4. 作业控制说明书
   * 作业控制说明书是由作业控制语言编写的一段程序，它通常存储在被处理作业的前边
   * 作业的运作由作业控制说明书来传递给监控程序，运行过程中，监控程序读入并解释作业说明书，控制各个作业步骤的执行。

5. 一般指令和特权指令
   * `操作系统的运行模式`：用户模式和特权模式
   * `处理器的状态`：目态和管态
   * `机器指令`:一般指令和特权指令
   * `系统调用`:用户程序不能直接使用特权指令，他们必须向操作系统请求这些功能，这些功能通过系统调用完成。

6. 系统调用的过程
   * 首先，当系统调用发生时，由中断或异常处理程序，把控制流转移到监控程序内的一些特定位置，处理器模式变为特权模式
   * 其次，由监控程序执行被请求的功能
   * 最后，恢复现场，运行模式转变为用户模式，控制权交给用户程序

7. `SPOOLing`技术
   
   * 是多道程序设计的关键技术之一，也成为假脱机技术。

#### 二、分时系统

1. 基本工作方式
   * 在分时系统中，一台主机连接了若干个终端，每个终端可由一个用户使用。用户通过终端交互式地向系统提出命令请求，系统接收用户命令之后，采用时间片轻转方式处理服务请求，并通过交互式在终端上向用户显示结果。

![](F:\自考\操作系统\img\2020-05-13_231649.jpg)

2. 特点：
   * 多路性
   * 交互性
   * ”独占性“
   * 及时性

#### 三、实时操作系统

* 实时操作系统是指，使计算机能够在规定的时间内，及时响应外部事件的请求，同时完成对该事件的处理，并能够控制所有实时设备和实时任务协调一致的工作的操作系统
* 目标：在严格时间范围内，对外部请求做出反应，系统具有可靠性。

* 分类：
  * 硬实时系统和软实时系统
  * 除了多道程序系统的基本功能外，还有以下功能：
    * 实时时钟管理
    * 过载防护
    * 高可靠性

#### 四、嵌入式操作系统

1. 定义： 
   * 在各种电器、电子和智能机械上，嵌入安装着各种微处理器或微控制芯片。
   * 嵌入式操作系统就是运行在嵌入式芯片环境中，对整个芯片以及他所操作、控制的各种部件装置等资源进行统一协调、调度、指挥和控制的系统软件。

### 9、操作系统设计

#### 1、操作系统的设计过程

* 设计功能
  * 确定所设计的操作系统应具备哪些功能以及操作系统的类型。跟目标有关

* 算法设计
  * 选择和设计满足系统功能的算法和错落，并分析和估算其有效能

* 结构设计

#### 2、操作系统的设计目标

1. 可靠性
2. 高效性
3. 易维护性
4. 可移植性
5. 安全性
6. 简明性

#### 3、操作系统的结构设计

操作系统结构研究的目标

1. 系统模块化
2. 模块标准化
3. 通信规范化

#### 4、操作系统的结构

常见的操作系统结构

1. 整体式结构
2. 层次性结构
3. 微内核（客户/服务器）结构