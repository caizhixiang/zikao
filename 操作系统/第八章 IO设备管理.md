# 第八章 I/O设备管理

## 第一节 I/O设备管理的基本概念

### 一、I/O设备管理的任务

1. 解决I/O设备和CPU速度不匹配的矛盾
2. 提供简单易用的接口，实现对设备的统一管理
3. 保证设备的安全性

### 二、I/O设备分类

#### 1、按设备使用特性分类

输入设备、输出设备、交互式设备、存储设备

#### 2、按设备的信息组织方式分类

字符设备和块设备

#### 3、按设备使用的可共享性分类

独占设备、共享设备、虚拟设备

虚拟设备是指在一类设备上模拟另一类设备，目的是为了提高设备利用率

### 三、I/O设备管理与文件管理的关系

I/O设备管理对象：

I/O设备，是对象资源的管理，提供标准接口供用户用这些设备

文件管理对象：

设备里边存储的数据和信息，提供一整套对这些资源的管理规则，并且以文件及配套的概念来具体实施。

UNIX系统中：

所有设备都当作文件对象来管理。

## 第二节 I/O硬件和I/O软件的组成

### 一、I/O硬件的组成

不同的人对I/O硬件的理解不同：

电子工程师：I/O硬件就是芯片、导线、电源

程序员：I/O硬件提供给软件的接口，如硬件能够接收的命令，它能够完成的功能以及让能够报告的错误等

本节主要介绍怎样对I/O设备编程，而不是如何设计、制造和维护硬件

硬件角度，I/O硬件由物理设备和电子部件两部分组成

物理设备是达成I/O硬件功能的基础，对操作系统而言更注重的是其电子部件的控制

![](F:\自考\操作系统\img\33.jpg)

第一层: 处理器和内存，通过总线和接口部件廉价而

第二层：接口（适配器）

第三层：设备控制器，是一种电子部件，每个设备控制器都有若干个寄存器与处理器进行通信

第四层：外围设备，设备并不直接与CPU进行通信，而是与设备控制器i女性通信。

### 二、I/O软件组成

#### 1、 I/O软件结构的基本思想

I/O软件组成一系列层次，较低的层次处理与硬件有关细节，并将硬件的特征与较高的层隔离；较高的层则向用户提供一个友好的、清晰而规整的I/O接口。

#### 2、I/O软件结构

四层：中断处理程序、设备驱动程序、设备独立层软件、用户层软件

![](F:\自考\操作系统\img\2020-05-22_142918.jpg)

### 三、设备独立性

含义：

​		除了直接与设备打交道的底层软件之外，其他部分的软禁并不依赖于硬件。即应用程序中所使用的设备不局限于使用某个具体的物理设备，也称为设备无关性

优点：

​		当I/O设备更新时，没有必要重新编写全部I/O软件。实际应用只要安装了驱动程序，可以方便 安装好新的I/O设备。  

设备独立性软件的功能如下：

#### 1、设备命名

​		在操作系统的I/O软件中，借用了于文件系统统一命名的方法，即采用文件系统路径名的方法来命名设备。

​		例如：UNIX系统，`/dev/tty00`，确定了一个特殊的文件，其中包含了主设备号和次设备号。主设备号用于寻找对应的设备驱动程序，而次设备号提供了设备驱动程序的有关参数，用来确定要读写的躯体设备。

#### 2、设备保护

​		防止未授权用户对设备的非法使用

​		UNIX系统：存取权限模式，`rwx`位进行保护

#### 3、提供一个与设备无关的逻辑块

​		不同的设备，存储空间大小、读取速度、传输速率各不相同，与设备无关软件通过向上层提供大小统一的逻辑块屏蔽这种不同，使得上层软件只与抽象设备打交道，而不必考虑上述不同。