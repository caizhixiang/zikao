# 第六章 存储管理

## 第一节  存储管理概述

### 一、存储体系

![](F:\自考\操作系统\img\2020-05-20_144634.jpg)

### 二、存储管理的任务

- 内存空间一般分为两个区域：

系统区：存放操作系统常驻内存部分，用户不能占用这部分空间

用户区：分配给用户使用，用于装入和存储用户程序和数据，随时变化。

- 存储管理的实质：用户空间的管理
- 内存管理问题主要包括：
  1. 内存管理的方法
  2. 内存的分配与释放算法
  3. 虚拟存储的管理
  4. 控制内存和外存之间的数据流动方法
  5. 地址变换技术
  6. 内存数据保护和共享技术

#### 1、内存的分配与回收

- 功能
  - 记住每个存储区域的状态：空闲与否
  - 实施分配：用户提出请求，分配内存
  - 回收：回收用户释放的区域

- 内存分配表
  - 位示图表示法
  - 空闲页面法
  - 空闲块表法

- 内存分配方式
  - 静态分配：程序运行前分配内存，不允许"搬家"
  - 动态分配：程序运行时允许动态分配内存，且允许"搬家"

#### 2、存储共享

所谓存储共享是指两个或多个进程共用内存中相同区域

- 包括：代码共享和数据共享

- 目的：节省内存空间，提高内存利用率；通过内存共享实现进程通信

#### 3、存储保护

- 目的： 为多个程序共享内存提供保护，使在内存中的各道程序，只能访问它自己的区域，避免各道程序间相互干扰

- 方法：
  - 地址越界保护
  - 权限保护

#### 4、“扩充”内存容量

​		用户在编制程序时，不应该受内存容量的限制，所以要采用一定技术来“扩充”内存容量，使得用户得到比实际内存容量大的多的内存空间

​		借助虚拟存储技术或交换技术完成，达到在逻辑上扩充内存容量的目的

### 三、地址转换

#### 1、地址重定位

- 绝对地址：存储器以字节为单位编址，每个字节都有对应的地址。假定内存容量为n，则编号顺序为0，1，2，3，...，n - 1，地址为物理地址或绝对地址
- 物理地址空间：由绝对地址对用的内存空间称为"物理地址空间"
- 逻辑地址：在多道程序系统中，内存中同时存储了多个用户程序，每个用户不能预先知道他的程序被存储到什么地方。为了方便，每个用户都可认为自己的程序和数据存储在一组"0"地址开始的连续空间中，用户程序中使用的地址，称为"逻辑地址"或"相对地址"。
- 逻辑地址空间：由逻辑地址对应的存储空间称为逻辑地址空间

```
	每当用户把程序装入内存时，存储管理为他分配的空间可能是从某一单元开始的连续的地址空间，他的起始位置不固定，即逻辑地址与物理地址经常不一致。
	把逻辑地址转换为绝对地址的工作称为“地址重定位”，分为“静态重定位”和“动态重定位”两种。
```

#### 2、静态重定位

内存在装入一个程序时，把程序中的指令和数据地址全部转换为绝对地址，该过程在程序运行前进行，程序运行过程中无需在转换，这种转换方式成为“静态重定位”。

![](F:\自考\操作系统\img\2020-05-20_153320.jpg)

#### 3、动态重定位

内存在装入程序时，不进行地址转换，而是直接把程序装入到分配的内存中，程序在执行过程中完成地址的转换，这种转换方式成为“动态重定位”。

![](F:\自考\操作系统\img\2020-05-20_153903.jpg)

## 第二节

## 第三节



