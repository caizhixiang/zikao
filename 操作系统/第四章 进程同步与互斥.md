# 第四章 进程同步与互斥

## 第一节 进程间相互作用

### 一、相关进程和无关进程

1. 相关进程：在逻辑上具有某种联系的进程
2. 无关进程：在逻辑上没有联系的进程
3. 举例：
   * 为两个不同源程序进行编译的进程，他们可以并发执行，但他们之间无关
   * 三个进程，分别是读数据进程、处理数据进程、打印结果进程，他们相互依赖、相互合作，是一组相关进程

### 二、与时间有关的错误

* 对于相关进程来说，可能有若干并发进程同时使用共享资源，即一个进程一次使用未结束，另一个进程也可以使用，形成交替使用共享资源
* 结果：形成与时间有关的错误

## 第二节 进程同步与互斥

#### 1、进程的同步

1. 进程的同步：

   是指进程之间一种直接的协同工作关系，一些进程相互合作共同完成一项任务

2. 例如：

   进程A从硬盘上读记录，每读出一个记录就存入缓冲区，进程B从缓冲区中取出记录加工，直至所有记录处理结束

   直接制约关系：A若没有把记录读入缓冲区，B等待，反之，B若没有从缓冲区取出记录，A等待。

#### 2、进程的互斥

* 在系统中，许多程序常常需要共享资源，而这些贡献资源往往需要排他性的使用，即一次只能为一个进程服务，因此各进程之间只能互斥使用这些资源，进程间的这中关系就是进程的互斥

* 例如：

  多个进程竞争使用打印机、一些变量、表格等资源。

  进程间的互斥是一种间接制约关系。

#### 3、临界区

1. 临界资源：

   若在系统中的某些资源一次只允许一个进程使用，则这类资源称为临界资源或共享变量

2. 临界区：

   访问临界资源的那段代码

3. 相关临界区：

   如果有若干进程共享某一临界资源,则该临界区称为相关临界。

4. 相关临界区的调度使用原则
   * 当临界资源空闲时，若有一个进程要求进入临界区，应允许它立即进入。------有空让进，有效利用资源。
   * 若有一个进程已在临界区，其他要求进入临界区的进程必须等待。 -------无空等待，互斥进入
   * 当没有进程在临界区，而同时有多个进程要求进入临界区，选择其一进入，其他等待。 ---多种择一
   * 任意一个进程进入临界区的要求应该在有限时间满足 ------有限等待，避免死等
   * 处于等待状态的进程应该放弃占用处理器  --------让权等待，避免忙等