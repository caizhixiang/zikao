# 第一章 概论

## 一、计算机系统的层次结构

### 1、计算机系统的层次结构

1. 计算机系统  = 硬件 / 固件 + 软件

2. 计算机语言从低级向高级发展

​		高一级语言的语句相对于低一级语言来说功能更便于应用，但又都以低级语言为基础

3. 透明性

   ​	在计算机技术中，把这种本来存在的事物或属性，但从某种角度看好像又不存在的概念称为透明性。

从计算机语言的角度，把计算机系统按功能划分为6级

![](F:\自考\计算机系统结构\img\2020-05-24_221817.jpg)

### 2、虚拟机、翻译、解释

虚拟机： 有软件实现的机器

语言实现的两种基本技术

1. 翻译：先把N + 1级程序全部转成N级程序后，在去执行新产生的N级语言，在执行过程中N + 1级程序不再被被访问。

2. 解释：每当一条N + 1级指令被译码后，就直接去执行一串等效的N级指令，然后再去取下一条N + 1级的指令，依此重复进行。

   解释执行比编译后再执行所花的时间多，但占用的存储空间较少。

## 二、计算机系统的软硬件取舍与定量设计原理

### （一）计算机系统的软硬件取舍

![](F:\自考\计算机系统结构\img\2020-05-26_092205.jpg)

 #### 1、计算机系统软硬件费用评估

 无论是硬件还是软件,费用都应包括研制费用和重复生产费用

##### 研制费用Design

 设某功能的软、硬件实现的每次设计费用分别为![](F:\自考\计算机系统结构\img\2020-05-26_092854.jpg)和![](F:\自考\计算机系统结构\img\2020-05-26_092907.jpg)，则![](F:\自考\计算机系统结构\img\2020-05-26_092417.jpg)是完全可能的。

##### 重复生产费Manufacture

 设该功能软、硬件实现的每次重复生产费分别为![](F:\自考\计算机系统结构\img\2020-05-26_093058.jpg)和![](F:\自考\计算机系统结构\img\2020-05-26_093111.jpg)，则![](F:\自考\计算机系统结构\img\2020-05-26_092538.jpg)也是可能的。

```
s为软件费用，h为硬件费用
```

 设C为该功能在软件实现时需重新设计的次数,则该功能用软件实现的设计费用就为

 C * ![](F:\自考\计算机系统结构\img\2020-05-26_092854.jpg)

 设该功能在存贮介质上出现了R次，软件实现此功能的重 复生产费用就为

 R *  ![](F:\自考\计算机系统结构\img\2020-05-26_093058.jpg)

 假定该计算机系统共生产了V台,每台计算机若用硬件实现该功能的费用就为

![](F:\自考\计算机系统结构\img\2020-05-26_094220.jpg)

改用软件实现则为

![](F:\自考\计算机系统结构\img\2020-05-26_094311.jpg)

只有

![](F:\自考\计算机系统结构\img\2020-05-26_094319.jpg)

用硬件才做适宜。

 将上述![](F:\自考\计算机系统结构\img\2020-05-26_092907.jpg)与![](F:\自考\计算机系统结构\img\2020-05-26_092854.jpg)、<img src="F:\自考\计算机系统结构\img\2020-05-26_093111.jpg" style="zoom:67%;" />与![](F:\自考\计算机系统结构\img\2020-05-26_093058.jpg)的比值代入,得

 ![](F:\自考\计算机系统结构\img\2020-05-26_094641.jpg)

 假设![](F:\自考\计算机系统结构\img\2020-05-26_094652.jpg)得到![](F:\自考\计算机系统结构\img\2020-05-26_094700.jpg)

 		因为值一般总比100小,所以值愈大,这个不等式就愈 能成立。换句话说,只有计算机系统的产量大,增大硬件实 现的比例才是适宜的。如果用硬件实现不能给用户带来明显的好处,其产量仍然较低,是不会有生命力的。

 #### 2、计算机系统软硬件取舍的基本原则

1. 从实现费用、速度和其他性能要求综合考虑,获取高的性能价格比

2. 要考虑到准备采用和可能采用的组成技术,使它尽不要过多或不合理地限制各种组成、实现技术的采用。
3. 不能仅从“硬”的角度去考虑如何便于应用组成技术的成果和发挥器件技术的进展,还应从“软”的角度把为编译和操作系统的实现,以至高级语言程序的设计提供更好的硬件支 持放在首位。

### （二）定量设计原理

 #### 1、怎样描述一个计算机系统的性能

 ##### 使用者： 响应时间(response time)

-  完成任务的时间(执行时间)

- 事件从开始到结束所用的时间

- 执行时间(execution time ),响应时间(response time)， 延迟(latency )

 ##### 管理员：吞吐量（throughput）

-  单位时间内完成的总工作量

- 单位时间(每天、小时、星期、秒、纳秒...等等）内完成的任务数量(性能)

- 吞吐率( throughput ),带宽( bandwidth )流量

#### 2、 常用计算机系统的性能指标

![](F:\自考\计算机系统结构\img\2020-05-26_101314.jpg)

- 时钟频率：(处理机主频)主频、外频、倍频

- `MPIS`每秒百万条指令

 `Million Instructions Per Second `

- `Mflops`每秒百万条浮点指令

 `Millions of FLoating-point Operations executed Per Second`

####  3、计算机系统性能的唯一可靠指标

- 真实程序的运行时间

 		是计算机性能的唯一可靠的测度!

- 衡量性能最可靠的标准：真实程序的执行时间

​		相同的任务,花费的时间越少、速度越快，性能越高， 区别在于是单任务(关注响应时间)还是多任务（关注吞吐量）

#### 4、 定量设计原理

 ##### （1）大概率事件优先原则(哈夫曼压缩原理)

 		加快经常性事件的速度(make the common case fast)

##### （2）阿姆达尔(Amdahl)定律

 		定义系统性能的加速比,确定对性能限制最大的部件，计算改进某些部件所获得的性能提高

 		加快某部件执行速度所能获得的系统性能加速比,受限于该部件的执行时间占系统中总执行时间的百分比。

![](F:\自考\计算机系统结构\img\2020-05-26_103614.jpg)

![](F:\自考\计算机系统结构\img\2020-05-26_104341.jpg)

```
Fe: 改进的比例
Se：改进比例的倍数
```

![](F:\自考\计算机系统结构\img\2020-05-26_104553.jpg)

![](F:\自考\计算机系统结构\img\2020-05-26_104738.jpg)

 ##### （3）程序的局部性原理

 		空间局部性（指刚跑的指令或数据一会还会用到）、时间局部性（指刚跑的指令或数据一会挨着他的指令或数据要用到）

|      | 时间局部性 |  空间局部性  |
| :--: | :--------: | :----------: |
| 指令 |  循环语句  |   顺序语句   |
| 数据 | 变量、数据 | 字符串、数组 |

```
少用跳转语句，局部性会消失
```



## 三、计算机系统结构、计算机组成与计算机实现

### 1、计算机系统结构

计算机系统的软、硬件的界面即机器语言程序员所看到的传统机器级所具有的属性

#### （1）定义

```
       计算机系统是一个非常复杂的系统，“计算机系统结构”是以计算机系统的外部特性为主来讲解计算机的基本结构的一门学科。所谓外部特性是指一个软件设计者编写出能够再计算机系统上正确运行的程序所必须了解的计算机系统的特性凡是计算机系统的使用者（包括一般用户和系统程序员）所能看到的计算机系统的属性都是“计算机系统结构”所要研究的对象。
```

 		作为计算机学科的一个分支,计算机系统结构主要研究软件、硬件的功能分配和对软件、硬件界面的确定,即确定哪些功能由软件实现,哪些功能由硬件实现。

 计算机系统结构概念的实质：

​		确定计算机系统中软、硬件的界面,界面之上是软件实现 的功能,界面之下是硬件和固件实现的功能。

#### （2）外部特性

指令系统：包括计算机指令的操作类型和格式、指令间的排序和控制机构等

数据表示：硬件能直接识别和处理的数据类型

寻址规则：包括最小寻址单元、寻址方式及其表示

寄存器定义：包括各种寄存器的定义、数量和使用方式

中断系统：中断的类型和中断响应硬件的功能等

机器工作状态的定义和切换：如管态和目态

存储系统： 主存容器、程序员可用的最大存储容量等

信息保护：包括信息保护方式和硬件对信息保护的支持

### 2、计算机组成

 		计算机系统结构的逻辑实现包含物理机器级中的数据流和控制流的组成以及逻辑设计等。

 		着眼于:物理机器级内各事件的排序方式与控制方式、各部件的功能以及各部件之间的联系。

### 3、计算机实现

 		计算机组成的物理实现包括处理机、主存等部件的物理结构,器件的集成度和速度,模块、插件、底板的划分与连接,信号传输,电源、冷却及整机装配技术等。

​		着眼于:器件技术(起主导作用)、微组装技术。

### 4、计算机系统结构、计算机组成与计算机实现关系

1. 相同系统结构,可以有不同的组成；

2. 一种组成可以有多种不同的实现方法;

3. 采用不同的系统结构会使可以采用的组成技术产生差异；

4. 组成也会影响结构；

## 四、软件、应用、器件的发展对系统结构的影响

### （一）软件的发展对系统结构的影响

 软件的可移植性:

 		一个软件可以不经修改或者只需少量修改就可以由一 台计算机移植到另一台计算机上正确地运行。

​		差别只是执行时间的不同。

​		我们称这两台计算机是软件兼容的。

#### 1、软件兼容性

1. 向上兼容 --------机器档次
2. 向下兼容 --------机器档次
3. 向前兼容 --------时间
4. 向后兼容 --------时间

再软件中必须考虑向后兼容

#### 2、 实现可移植性的常用方法

##### （1）采用序列机

 		由同一厂家生产的具有相同的系统结构,但具有不同组成和实现的一系列不同型号的机器。

##### （2）虚拟与仿真

 		使软件能在具有不同系统结构的机器之间之间的相互移植

##### （3）统一高级语言

 		实现软件移植的一种理想的方法

#### 3、模拟和仿真

##### （1）模拟

​		用软件的方法在一台现有的机器(称为宿主机）上实现另一台机器(称为虚拟机)的指令集。

​		通常用解释的方法来实现。

​		运行速度较慢,性能较差。

##### （2）仿真

 		用一台现有机器(宿主机)上的微程序去解释实现另一台机器(目标机)的指令集。

​		运行速度比模拟方法的快

​		 仿真只能在系统结构差距不大的机器之间使用

### （二）应用的发展对系统结构的影响

 不同的应用对计算机系统结构的设计提出了不同的要求

 应用需求是促使计算机系统结构发展的`最根本的动力`

一些特殊领域：需要高性能的系统结构

多媒体：`3D`游戏、高清视频

网络应用：高性能路由、防火墙

科学计算： 天气预报、石油勘探

### （三）器件发展对系统结构的影响

 摩尔定律：

 集成电路芯片上所集成的晶体管数目每隔18个月就翻一番。

![](F:\自考\计算机系统结构\img\2020-05-25_221727.jpg)

主存储器（内存条）、CPU、磁盘

![](F:\自考\计算机系统结构\img\2020-05-25_222047.jpg)

 第一代：电子管(Valve )(1945~1954)(`1BM701`)

 第二代：晶体管(Transistor )(1955~1964)(`1BM7030`)

 第三代：集成电路(`LSI`)(1965~1974)(`1BM360~370`)

 第四代：大规模集成电路(VLSI)(1974~1990) (`1BM3090`、PC)

 第五代：微处理器(1990~2000)(Intel  / ARM)

### （四）制作工艺发展对系统结构的影响

![](F:\自考\计算机系统结构\img\2020-05-25_222336.jpg)

### （五）计算机更新换代的标志

 ####  1、是器件的换代是计算机换代的最突出的标志

​		计算机换代以器件来划分：速度、功能、可靠性、价格

 ####  2、是系统结构的发展

 		系统结构不断改进,许多重要概念不断提出并且得到实现

 		系统结构方面的特点同样是计算机换代的重要标志

## 五、系统结构中的并行性开发以及计算机系统的分类

### 1、并发

- 并行性：计算机系统在同一时刻或者同一时间间隔内进行多种运行操作。只要在时间上相互重叠，就存在并行性。
- 同时性：两个或两个以上的事件在同一时刻发生。
- 并发性：两个或两个以上的事件在同一时间间隔发生。

### 2、从执行程序的角度

- 指令内部并行： 单条指令中各微操作之间的并行。

- 指令级并行：并行执行两条或两条以上的指令。

- 线程级并行：并行执行两个或两个以上的线程。通常是以一 个进程内派生的多个线程为调度单位。

-  任务级或过程级并行：行并行执行两个或两个以上的过程或任 务(程序段),以子程序或进程为调度单元。

- 作业或程序级并行：并行执行两个或两个以上的作业或程序。

 ### 3、从处理数据的角度来看(冯氏分类法)

- 字串位串：每次只对一个字的一位进行处理。最基本的串行处理方式,不存在并行性。

- 字串位并：同时对一个字的全部位进行处理,不同字之间是串行的。开始出现并行性。

- 字并位串：同时对许多字的同一位(称为位片)进行处理。处具有较高的并行性。

- 全并行：同时对许多字的全部位或部分位进行处理。最高一级的并行。

###  4、提高并行性的技术途径

- 时间重叠：引入时间因素,让多个处理过程在时间上相互错 开,轮流重叠地使用同一套硬件设备的各个部分,以加快硬 件周转而赢得速度。流水线

-  资源重复：引入空间因素,以数量取胜。通过重复设置硬件 资源,大幅度地提高计算机系统的性能。多核、多CPU、集群

-  资源共享：这是一种软件方法,它使多个任务按一定时间顺序轮流使用同一套硬件设备。分时调度

 ### 5、计算机系统的分类（Flynn 分类法）

 按照指令流和数据流的多倍性进行分类。

- 指定流：计算机执行的指令序列。

- 数据流：由指令流调用的数据序列。

- 多倍性：在系统受限的部件上,同时处于同一执行阶段 的指令或数据的最大数目。

 Flynn 分类法把计算机系统的结构分为4类:

- 单指令流单数据流(`SISD`)

  ![](F:\自考\计算机系统结构\img\2020-05-25_230510.jpg)

- 单指令流多数据流(`SMD`)

  ![](F:\自考\计算机系统结构\img\2020-05-25_230607.jpg)

- 多指令流单数据流(`MISD`)(无实际对应)

  ![](F:\自考\计算机系统结构\img\2020-05-25_230759.jpg)

- 多指令流多数据流(`MIMD`)

  ![](F:\自考\计算机系统结构\img\2020-05-25_230833.jpg)