# 第三章 存储、中断、总线与I/O系统

## 一、存储系统的基本要求和并行主存系统

### 1、存储系统的基本要求

- 从用户的角度来看,存储器的三个主要指标：

  ​	**容量、速度和价格**(指每位价格)

- 人们对这三个指标的要求

​		容量大、速度快、价格低

- 三个要求是相互矛盾的

  ​	速度越快,每位价格就越高;

  ​	容量越大,每位价格就越低;

  ​	容量越大,速度越慢。

### 2、单体单字和单体多字

![](F:\自考\计算机系统结构\img\2020-05-27_150604.jpg)...![](F:\自考\计算机系统结构\img\2020-05-27_151027.jpg)

### 3、多体单字交叉存储器

![](F:\自考\计算机系统结构\img\2020-05-27_152612.jpg)

### 4、并行存储系统

 能并行读出多个CPU字的单体多字和多体单字、多体多字、多体多字的交叉访问主存系统统称为并行主存系统

![](F:\自考\计算机系统结构\img\2020-05-27_154843.jpg)

## 二、中断系统

 中断系统是计算机的重要组成部分。

 实时控制、故障自动处理、计算机与外围设备的数据传送往往采用中断系统。

 中断系统的应用大大提高了计算机效率。

![](F:\自考\计算机系统结构\img\2020-05-27_155359.jpg)

### 1、中断

 CPU暂停当前的工作,转去处理要求迅速处理的事件，处理完后,继续原来的工作

### 2、  中断服务/处理程序

```
 void ISRname (void)  interrupt   n [ using m ] 
 函数类型      ———— 无参数， 无返回值
 ISRname      ———— 中断服务函数名称，由用户定义
 interrupt    ———— n是中断编号，指示中断向量
 
 示例 ：定时器O的中断服务函数
 void timeOISR(void) interrupt 1 
 {
 	tnOsTimeTick();
 }
 注意：上述n和m 有下划线 中断程序接收0，返回0
```

### 3、 中断向量

 CPU响应中断时跳转到一个特定的地址开始执行中断服务程序，这个地址就是中断向量

![](F:\自考\计算机系统结构\img\2020-05-27_161233.jpg)

### 4、 几个中断基本概念

|     中断源     |                引起中断的各种事件                 |
| :------------: | :-----------------------------------------------: |
|  **中断请求**  |      **中断源向中断系统发出请求中断的申请**       |
|  **中断响应**  | **允许其中断CPU现行程序的运行，转去中断处理程序** |
|  **中断使能**  |       **允许CPU响应中断请求，做出中断处理**       |
|  **中断屏蔽**  |       **阻止CPU响应中断请求，禁止中断处理**       |
| **中断优先级** |            **指示中断请求的紧迫程度**             |
|  **中断嵌套**  |     **在进行禁止中断处理时应高优先级的中断**      |

### 5、中断源

① 机器故障中断。

② “异常”、程序性中断。一是程序性错误，二是缠身特殊的运算结果,例如定点溢出;三是程序出现某些预先确定要跟踪的事件,跟踪操作主要用于程序调用。

③ 输入输出设备中断。

④ 外中断。来自控制台中断开关、计时器、时钟或者其他设备,这类中断的处理较简单,实时性强。

⑤ 调用管理程序。用户程序利用指令“调用管理程序”中断请求,是用户程序和操作系统之间的联系桥梁。

### 6、中断嵌套

 发生条件： 低优先级中断正在处理的时候,高优先级中断请求有效

![](F:\自考\计算机系统结构\img\2020-05-27_162911.jpg)

 中断嵌套处理机制： 高优先级中断抢先处理，处理完后，继续处理被抢占的低优先级的中断

### 7、 轮询通信流程图与中断驱动流程图

请求服务：在处理任务4的时候外围部件请求服务

轮询缺点：只能在查询到有请求的时候才能提供服务，请求的时间不确定，导致响应时间不稳定。

![](F:\自考\计算机系统结构\img\2020-05-27_163951.jpg)

![](F:\自考\计算机系统结构\img\2020-05-27_164003.jpg)

### 8 、中断响应硬件原理

![](F:\自考\计算机系统结构\img\2020-05-27_165004.jpg)

### 9、 中断系统的软硬件功能分配

 中断系统的软、硬件功能分配实质上就是中断处理程序软件和中断响应硬件的功能分配。

 中断系统的功能包括中断请求的保存和清除、优先级的确定、中断断点及现场的保存、对中断请求的分析处理以及中断返回等,这些全是由中断响应硬件和中断处理程序共同完成的。

## 三、总线系统

## 四、I/O系统

