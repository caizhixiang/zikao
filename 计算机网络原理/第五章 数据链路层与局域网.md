# 第五章 数据链路层与局域网

![](F:\自考\计算机网络原理\img\2020-06-08_111529.jpg)

## 第一节 数据链路层服务

链路:通信链路连接的相邻结点的通信信道。

链路层数据单元：帧

![](F:\自考\计算机网络原理\img\2020-06-08_111714.jpg)

主要功能包括:

1. 组帧
2. 链路接入:点对点链路、广播链路
3. 可靠交付(可靠传输方法多用于高出错率链路
4. 差错控制

## 第二节 差错控制

 ### 一、差错控制的基本方式

差错控制的四种基本方式:

1. 检错重发
2. 前向纠错：接收端进行差错纠正。
4. 反馈校验：接收端将收到的数据原封不动发回发送端。
5. 检错丢弃

###  二、差错编码的基本原理

香农信道编码定理:

理论上可以通过编码使得数据传输过程不发生错误,或者将错误概率控制在很小的数值之下。

![](F:\自考\计算机网络原理\img\2020-06-08_112336.jpg)

### 三、 差错编码的检错与纠错能力

汉明距离:两个等长码字之间,对应位不同的位数。

编码集的汉明距离:该编码集中任意两个码字之间汉明距离的最小值。

差错编码的检错或纠错能力与编码集的汉明距离有关。

1. 检错编码:如果编码集的汉明距离![](F:\自考\计算机网络原理\img\2020-06-08_112618.jpg),则该差错编码可以检测r位的差错。

   ![](F:\自考\计算机网络原理\img\2020-06-08_112550.jpg).![](F:\自考\计算机网络原理\img\2020-06-08_112624.jpg)

2. 纠错编码:如果编码集的汉明距离![](F:\自考\计算机网络原理\img\2020-06-08_112631.jpg),则该差错编码可以纠正r位的差错。

   ![](F:\自考\计算机网络原理\img\2020-06-08_112608.jpg).![](F:\自考\计算机网络原理\img\2020-06-08_112636.jpg)

###  四、典型的差错编码

1. 奇偶校验码:

   奇校验:编码后的码字中“1”的个数为奇数

   偶校验:编码后的码字中“1”的个数为偶数

2. 汉明码:

   可以实现单个比特差错纠正。

3. 循环冗余码`CRC`:

   检错能力强,编码效率高,实现简单。

   例题

   - 假设`CRC`编码采用的生成多项式为G(x)=x^4+x+1,请为位串10111001进行`CRC`编码。

   - 答案：101110011001

   -  解析：G(x)=x^4+x+1对应的比特串为10011,在待编码位串10111001后添加0000,得到1011010000，按如下计算过程求余数R=1001

     ![](F:\自考\计算机网络原理\img\2020-06-08_114258.jpg)

## 第三节 多路访问控制协议

### 一、 信道划分MAC协议

多路访问控制MAC:

广播信道上用于协调各个结点的数据发送。

信道划分MAC协议:

1. **频分多路复用：**在频域内将信道带宽划分为多个子信道。

2. **时分多路复用**：将通信信道的传输信号在时域内划分为多个等长的时隙。

3. **波分多路复用**：在一根光纤中,传输多路不同波长的光信号。

4. **码分多路复用**：从编码域进行划分,使得编码后的信号在同一信道中混合传输。

###  二、随机访问MAC协议

1. ALOHA 协议

   纯ALOHA：直接发送→信道侦听→冲突重发

   时隙ALOHA：时隙开始时发送一信道侦听→冲突则下一时隙以概率P重发

2. 载波监听多路访问协议`CSMA`

   **发送前监听信道是否空闲**

   - (1) 非坚持`CSMA`：忙则等待随机时间后再侦听
   - (2) 1-坚持`CSMA`：忙则持续侦听
   - (3) P-坚持`CSMA`：闲则概率P在最近时隙发送

3. 带冲突检测的载波监听多路访问协议`CSMA/CD`监听空闲后发送,发送时检测碰撞,碰撞后等待重发。

###  三、受控接入MAC协议

1. 集中式控制

   由一个主机负责调度其他通信站接入信道,从而避免冲突。

   主要方法:轮询技术,又分为轮叫轮询和传递轮询。

2. 分散式控制

   典型方法:令牌技术,如令牌环网。

![](F:\自考\计算机网络原理\img\2020-06-08_133300.jpg)

## 第四节 局域网

### 一、 数据链路层寻址与`ARP`

1. MAC地址

   每个接口对应一个MAC地址,且全球唯一长度48位(前24位厂商代码 + 后24位标识)。

2. 地址解析协议`ARP`

   根据本网内目的主机或默认网关的`IP`地址获取其MAC地址;

   查询/响应的方式。

###  二、以太网

1. `IEEE802.3`标准
2. 采用`CSMA/CD`访问控制方法
3. 以太网技术
   - `10Base-5,10Base-T `
   - 快速以太网`100Base-TX,100base-4, 100Base-FX `
   - 千兆以太网
   - 万兆以太网

```
10Base-5: 数据传输率10M ，Base基带传输的方法，5单段电缆（同轴电缆）最大传		    输距离500米
10Base-T：数据传输率10M ，Base基带传输的方法，T双绞线
100Base-TX,100base-4, 100Base-FX ： 百兆传输率，T双绞线，F光纤
```

###  三、交换机

1. 转发与过滤

   可以依据接收到的链路层帧的目的MAC地址,选择性地转发到相应的端口。

   以目的MAC地址为主键,查找交换表。

   ![](F:\自考\计算机网络原理\img\2020-06-08_135703.jpg)

2. 自学习

   交换机通过自学习构建交换表。

3. 优点
   - 消除冲突,提高性能;
   - 支持异质链路;
   - 易于进行网络管理。

###  四、虚拟局域网

1. 一种基于交换机(支持`VLAN`功能)的逻辑分割广播域的局域网应用形式。
2. 不受物理位置的限制，以软件的方式划分和管理局域网中的工作组。
3. 能够抑制广播风暴。
4. 划分方法:
   - 基于交换机端口
   - 基于MAC地址
   - 基于上层协议类型或地址

![](F:\自考\计算机网络原理\img\2020-06-08_140203.jpg)

## 第五节 点对点链路协议

### 一、 `PPP`

 点对点协议——`PPP`:

**能够处理差错检测、支持多种上层协议、允许连接时协商`IP`地址、允许身份认证。**

**典型应用:拨号上网**

 功能:

1. 成帧
2. 链路控制协议`LCP`
3. 网络控制协议`NCP`

###  二、`HDLC`协议

- 高级数据链路控制`HDLC`协议：可应用于点对点链路和点对多点链路。

- 帧定界：帧的定界符是01111110

![](F:\自考\计算机网络原理\img\2020-06-08_141501.jpg)

- 位填充/透明传输

  发送端：只要发现数据字段5个连续的1,就立即插入一个0,保证数据字段不会出现连续的6个1;

  接收端：发现数据流中5个连续的1,就删除其后的0,还原成原来的信息。

##  本章小结

 本章重难点回顾:

1. 典型的差错编码,如`CRC`等;
2. `CSMA/CD`协议;
3. `ARP`、以太网、交换机、`VLAN`等局域网工作原理。